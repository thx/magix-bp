KISSY.add("app/common/mustache",function(){var a="undefined"!=typeof module&&module.exports||{};return function(a){function b(a){return s.test(a)}function c(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return v[a]||a})}function d(a,b,c,d){d=d||"<template>";for(var e,f=b.split("\n"),g=Math.max(c-3,0),h=Math.min(f.length,c+3),i=f.slice(g,h),j=0,k=i.length;k>j;++j)e=j+g+1,i[j]=(e===c?" >> ":"    ")+i[j];return a.template=b,a.line=c,a.file=d,a.message=[d+":"+c,i.join("\n"),"",a.message].join("\n"),a}function e(a,b,c){if("."===a)return b[b.length-1];for(var d,e,f,g,h=a.split("."),i=h.length-1,j=h[i],k=b.length;k;){for(g=b.slice(0),e=b[--k],f=0;i>f&&(e=e[h[f++]],null!=e);)g.push(e);if(e&&"object"==typeof e&&j in e){d=e[j];break}}return"function"==typeof d&&(d=d.call(g[g.length-1])),null==d?c:d}function f(a,b,c,d){var f="",g=e(a,b);if(d)(null==g||g===!1||l(g)&&0===g.length)&&(f+=c());else if(l(g))q(g,function(a){b.push(a),f+=c(),b.pop()});else if("object"==typeof g)b.push(g),f+=c(),b.pop();else if("function"==typeof g){var h=b[b.length-1],i=function(a){return k(a,h)};f+=g.call(h,c(),i)||""}else g&&(f+=c());return f}function g(c,e){e=e||{};for(var f,g,h,i,j,k=e.tags||a.tags,l=k[0],m=k[k.length-1],n=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],o=[],p=!1,q=!1,s=function(){if(!p||q||e.space)o=[];else for(;o.length;)n.splice(o.pop(),1);p=!1,q=!1},t=[],u=function(a){k=r(a).split(/\s+/),g=k[0],h=k[k.length-1]},v=function(a){n.push('";',f,'\nvar partial = partials["'+r(a)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},w=function(a,b){var g=r(a);if(""===g)throw d(new Error("Section name may not be empty"),c,B,e.file);t.push({name:g,inverted:b}),n.push('";',f,'\nvar name = "'+g+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},x=function(a){w(a,!0)},y=function(a){var b=r(a),f=0!=t.length&&t[t.length-1].name;if(!f||b!=f)throw d(new Error('Section named "'+b+'" was never opened'),c,B,e.file);var g=t.pop();n.push('";',"\n    return buffer;","\n  };","\n})();"),n.push(g.inverted?"\nbuffer += renderSection(name,stack,callback,true);":"\nbuffer += renderSection(name,stack,callback);"),n.push('\nbuffer += "')},z=function(a){n.push('";',f,'\nbuffer += lookup("'+r(a)+'",stack,"");','\nbuffer += "')},A=function(a){n.push('";',f,'\nbuffer += escapeHTML(lookup("'+r(a)+'",stack,""));','\nbuffer += "')},B=1,C=0,D=c.length;D>C;++C)if(c.slice(C,C+l.length)===l){switch(C+=l.length,i=c.substr(C,1),f="\nline = "+B+";",g=l,h=m,p=!0,i){case"!":C++,j=null;break;case"=":C++,m="="+m,j=u;break;case">":C++,j=v;break;case"#":C++,j=w;break;case"^":C++,j=x;break;case"/":C++,j=y;break;case"{":m="}"+m;case"&":C++,q=!0,j=z;break;default:q=!0,j=A}var E=c.indexOf(m,C);if(-1===E)throw d(new Error('Tag "'+l+'" was not closed properly'),c,B,e.file);var F=c.substring(C,E);j&&j(F);for(var G=0;~(G=F.indexOf("\n",G));)B++,G++;C=E+m.length-1,l=g,m=h}else switch(i=c.substr(C,1)){case'"':case"\\":q=!0,n.push("\\"+i);break;case"\r":break;case"\n":o.push(n.length),n.push("\\n"),s(),B++;break;default:b(i)?o.push(n.length):q=!0,n.push(i)}if(0!=t.length)throw d(new Error('Section "'+t[t.length-1].name+'" was not closed properly'),c,B,e.file);s(),n.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var H=n.join("").replace(/buffer \+= "";\n/g,"");return e.debug&&("undefined"!=typeof console&&console.log||"function"==typeof print&&print(H)),H}function h(a,b){var h="view,partials,stack,lookup,escapeHTML,renderSection,render",i=g(a,b),j=new Function(h,i);return function(g,h){h=h||{};var i=[g];try{return j(g,h,i,e,c,f,k)}catch(l){throw d(l.error,a,l.line,b.file)}}}function i(){w={}}function j(a,b){return b=b||{},b.cache!==!1?(w[a]||(w[a]=h(a,b)),w[a]):h(a,b)}function k(a,b,c){return j(a)(b,c)}a.name="mustache.js",a.version="0.5.0-dev",a.tags=["{{","}}"],a.parse=g,a.compile=j,a.render=k,a.clearCache=i,a.to_html=function(a,b,c,d){var e=k(a,b,c);return"function"!=typeof d?e:void d(e)};var l,m=Object.prototype.toString,n=Array.isArray,o=Array.prototype.forEach,p=String.prototype.trim;l=n?n:function(a){return"[object Array]"===m.call(a)};var q;q=o?function(a,b,c){return o.call(a,b,c)}:function(a,b,c){for(var d=0,e=a.length;e>d;++d)b.call(c,a[d],d,a)};var r,s=/^\s*$/;if(p)r=function(a){return null==a?"":p.call(a)};else{var t,u;b("Â ")?(t=/^\s+/,u=/\s+$/):(t=/^[\s\xA0]+/,u=/[\s\xA0]+$/),r=function(a){return null==a?"":String(a).replace(t,"").replace(u,"")}}var v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w={}}(a),a});